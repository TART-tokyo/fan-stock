type Token @entity {
  id: ID!
  creator: Creator! # address
  name: String! # string
  symbol: String!
  totalSupply: BigInt!
  decimals: Int
  creatorTokenRatio: Int
  isTotalSupplyFixed: Boolean
  lockupPeriod: Int
  enableStakeToToken: Boolean
  accountTokens: [AccountToken!]!
}

type Creator @entity {
  id: ID!
  tokens: [Token!]! @derivedFrom(field: "creator")
  campaigns: [Campaign!]! @deribedFrom(field: "creator")
}

type Account @entity {
  id: ID!
  tokens: [AccountToken!]! @derivedFrom(field: "account")
  claims: [Claim!]! @derivedFrom(field: "account")
  # TODO: Disabled for this phase
  #  donates: [Donate!]! @derivedFrom(field: "account")
}

type AccountToken @entity {
  # Token id and account id contat by '-'
  id: ID!
  account: Account!
  balance: BigInt!
  token: Token! @derivedFrom(field: "accountTokens")
}

type Distributer @entity {
  id: ID!
  campaigns: [Campaign!]! @derivedFrom(field: "distributer")
}

type Campaign @entity {
  id: ID!
  distributer: Distributer!
  token: String!
  startDate: BigInt!
  endDate: BigInt!
  creator: Creator!
  campaignInfoCid: String!
  recipientsCid: String!
  claimAmount: BigInt!
  claimedNum: Int!
  status: Int!
  claims: [Claim!]! @derivedFrom(field: "campaign")
}

type Claim @entity {
  " Equals to: <accountAddress>-<campaignAddress>"
  id: ID!
  account: Account!
  campaign: Campaign!
  token: String!
  amount: BigInt!
}

type Donate @entity {
  " Equals to: <accountAddress>-<timestamp>"
  id: ID!
  from: Account!
  to: Creator!
  token: String!
  amount: BigInt!
}
